<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Apple Favorite - Премиальная Техника Apple</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <script async src="https://pay.google.com/gp/p/js/pay.js" onload="initGooglePay()"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <button class="mobile-menu-toggle" id="mobileMenuToggle" onclick="toggleMobileMenu()" aria-label="Меню">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="logo">
                <img src="images/logo/apple-logo.png" alt="Apple Logo" class="apple-logo">
                <svg class="apple-logo-fallback" width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display:none;">
                    <defs>
                        <linearGradient id="appleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#9333ea;stop-opacity:1" />
                            <stop offset="25%" style="stop-color:#ec4899;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#f97316;stop-opacity:1" />
                            <stop offset="75%" style="stop-color:#eab308;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#22c55e;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z" fill="url(#appleGradient)" stroke="url(#appleGradient)" stroke-width="0.5"/>
                </svg>
                <span class="logo-text">Apple <span class="logo-accent">Favorite</span></span>
            </div>
            <nav class="nav">
                <a href="#products">Каталог</a>
                <a onclick="openAboutModal(); closeMobileMenu();">О нас</a>
                <a onclick="openContactModal(); closeMobileMenu();">Контакты</a>
            </nav>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div class="admin-toggle" id="adminToggle" onclick="toggleAdminMode()" style="cursor: pointer; display: none;" title="Админ режим">
                    ADMIN
                </div>
                <div class="cart-icon" onclick="toggleCart(); closeMobileMenu();" style="text-transform: uppercase; letter-spacing: 1px; font-size: 0.9rem;">
                    CART
                    <span class="cart-count" id="cartCount">0</span>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Mobile Navigation -->
    <nav class="mobile-nav" id="mobileNav">
        <div class="mobile-nav-header">
            <div class="logo">
                <img src="images/logo/apple-logo.png" alt="Apple Logo" class="apple-logo">
                <svg class="apple-logo-fallback" width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display:none;">
                    <defs>
                        <linearGradient id="appleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#9333ea;stop-opacity:1" />
                            <stop offset="25%" style="stop-color:#ec4899;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#f97316;stop-opacity:1" />
                            <stop offset="75%" style="stop-color:#eab308;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#22c55e;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z" fill="url(#appleGradient)" stroke="url(#appleGradient)" stroke-width="0.5"/>
                </svg>
                <span class="logo-text">Apple <span class="logo-accent">Favorite</span></span>
            </div>
            <button class="mobile-menu-toggle active" onclick="closeMobileMenu()" aria-label="Закрыть">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <a href="#products" onclick="closeMobileMenu()">Каталог</a>
        <a onclick="openAboutModal(); closeMobileMenu();">О нас</a>
        <a onclick="openContactModal(); closeMobileMenu();">Контакты</a>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>Apple Favorite</h1>
            <p>Премиальная техника Apple с официальной гарантией</p>
            <a href="#products" class="btn-primary">Смотреть каталог</a>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="products">
        <div class="container">
            <h2>Наш каталог</h2>
            <div class="categories-filter">
                <button class="filter-btn active" onclick="filterProducts('all')">Все товары</button>
                <button class="filter-btn" onclick="filterProducts('Смартфоны')">Смартфоны</button>
                <button class="filter-btn" onclick="filterProducts('Наушники')">Наушники</button>
                <button class="filter-btn" onclick="filterProducts('Умные часы')">Умные часы</button>
                <button class="filter-btn" onclick="filterProducts('Кабели')">Кабели</button>
                <button class="filter-btn" onclick="filterProducts('Чехлы')">Чехлы</button>
                <button class="filter-btn" onclick="filterProducts('Аксессуары')">Аксессуары</button>
            </div>
            <div class="price-filter">
                <div class="price-filter-header">
                    <span>Фильтр по цене:</span>
                    <span id="priceRange" class="price-range-display">от 0 ₽ - до 500 000 ₽</span>
                </div>
                <div class="price-slider-container">
                    <div class="dual-range-slider" id="dualRangeSlider">
                        <div class="price-slider-track"></div>
                        <input type="range" id="priceSliderMin" class="price-slider price-slider-min" min="0" max="500000" step="1000" value="0" oninput="updatePriceFilter('min', this.value)" onchange="updatePriceFilter('min', this.value)" title="Точка А">
                        <input type="range" id="priceSliderMax" class="price-slider price-slider-max" min="0" max="500000" step="1000" value="500000" oninput="updatePriceFilter('max', this.value)" onchange="updatePriceFilter('max', this.value)" title="Точка Б">
                    </div>
                </div>
            </div>
            <div class="products-grid" id="productsGrid">
                <!-- Товары будут добавлены через JavaScript -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 Apple Favorite. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <!-- Модальное окно товара -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <!-- 3D Viewer Modal -->
    <div id="viewer3DModal" class="modal">
        <div class="modal-content viewer-content">
            <span class="close" onclick="close3DViewer()">&times;</span>
            <h2>3D Просмотр</h2>
            <div id="viewer3D" class="viewer3d-container">
                <model-viewer 
                    id="model-viewer" 
                    src="" 
                    camera-controls 
                    auto-rotate
                    auto-rotate-delay="0"
                    rotation-per-second="30deg"
                    shadow-intensity="1"
                    environment-image="neutral"
                    style="width: 100%; height: 100%;">
                    <button slot="ar-button" class="btn-control" style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);">
                        AR Просмотр
                    </button>
                </model-viewer>
            </div>
            <div class="viewer-controls">
                <button class="btn-control" onclick="close3DViewer()">Закрыть</button>
                <label class="btn-control btn-upload" id="adminUploadBtn" style="display: none; cursor: pointer;">
                    Загрузить 3D модель
                    <input type="file" accept=".glb,.gltf,.usdz" id="modelUploadInput" style="display: none;" onchange="upload3DModel(event)">
                </label>
                <button class="btn-control" id="adminClearBtn" style="display: none;" onclick="clearSaved3DModels()">
                    Очистить сохраненные
                </button>
            </div>
        </div>
    </div>

    <!-- Корзина -->
    <div id="cart" class="cart">
        <div class="cart-content">
            <div class="cart-header">
                <h3>Корзина</h3>
                <button class="cart-close-btn" onclick="toggleCart()">&times;</button>
            </div>
            <div id="cartItems" class="cart-items"></div>
            <div class="cart-total">
                <strong>Итого: <span id="cartTotal">0</span> ₽</strong>
                <button class="btn-checkout" onclick="checkout()">Оформить заказ</button>
            </div>
        </div>
    </div>

    <!-- Форма заказа -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content checkout-content">
            <span class="close" onclick="closeCheckoutModal()">&times;</span>
            <h2>Оформление заказа</h2>
            <form id="checkoutForm" onsubmit="submitOrder(event)">
                <input type="text" id="customerName" placeholder="Имя" required>
                <input type="tel" id="customerPhone" placeholder="Телефон" required>
                <input type="email" id="customerEmail" placeholder="Email" required>
                <textarea id="customerAddress" placeholder="Адрес доставки" required></textarea>
                
                <div style="margin: 1.5rem 0; padding: 1rem; background: #f8f8f8; border-radius: 0;">
                    <h3 style="margin-bottom: 1rem; font-size: 1.1rem; font-weight: 400;">Способ оплаты</h3>
                    <div id="googlePayButton" style="margin-bottom: 1rem;"></div>
                    <p style="font-size: 0.9rem; color: #666; text-align: center; margin-top: 1rem;">или</p>
                </div>
                
                <button type="submit" class="btn-primary btn-full">Подтвердить заказ</button>
            </form>
        </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
        <div class="modal-content about-modal-content">
            <span class="close" onclick="closeAboutModal()">&times;</span>
            <h2>О компании</h2>
            <div class="about-modal-body">
                <p class="about-lead">
                    Apple Favorite — ваш надежный партнер в мире премиальной техники Apple с 2015 года. Мы предлагаем только оригинальную продукцию Apple с официальной гарантией и поддержкой.
                </p>
                <div class="about-grid">
                    <div class="about-card">
                        <div class="about-icon" style="font-size: 3rem; font-weight: 300;">01</div>
                        <h3>Качество</h3>
                        <p>100% оригинальная продукция Apple, Samsung, Sony и других премиальных брендов с официальной гарантией</p>
                    </div>
                    <div class="about-card">
                        <div class="about-icon" style="font-size: 3rem; font-weight: 300;">02</div>
                        <h3>Доставка</h3>
                        <p>Быстрая доставка по всей России в течение 1-3 дней. Бесплатная доставка при заказе от 10 000 ₽</p>
                    </div>
                    <div class="about-card">
                        <div class="about-icon" style="font-size: 3rem; font-weight: 300;">03</div>
                        <h3>Поддержка</h3>
                        <p>Профессиональная консультация 24/7. Помогаем выбрать идеальное устройство под ваши задачи</p>
                    </div>
                    <div class="about-card">
                        <div class="about-icon" style="font-size: 3rem; font-weight: 300;">04</div>
                        <h3>Безопасность</h3>
                        <p>Защищенные платежи и конфиденциальность данных. Мы заботимся о вашей безопасности</p>
                    </div>
                    <div class="about-card">
                        <div class="about-icon" style="font-size: 3rem; font-weight: 300;">05</div>
                        <h3>Бонусы</h3>
                        <p>Программа лояльности с кэшбэком и специальными предложениями для постоянных клиентов</p>
                    </div>
                    <div class="about-card">
                        <div class="about-icon" style="font-size: 3rem; font-weight: 300;">06</div>
                        <h3>Сервис</h3>
                        <p>Собственный сервисный центр с квалифицированными мастерами и оригинальными запчастями</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" class="modal">
        <div class="modal-content contact-modal-content">
            <span class="close" onclick="closeContactModal()">&times;</span>
            <h2>Контакты</h2>
            <div class="contact-modal-body">
                <div class="contacts-grid">
                    <div class="contact-card" style="grid-column: 1 / -1; padding: 1.5rem;">
                        <div class="contact-icon" style="font-size: 2rem; font-weight: 300; margin-bottom: 0.5rem;">AD</div>
                        <h3 style="margin-bottom: 0.5rem;">Адрес</h3>
                        <p id="contactAddress" style="margin-bottom: 1rem;">Москва, Измайловский бульвар, 67, корпус 1</p>
                        <div class="map-container">
                            <iframe src="https://yandex.ru/map-widget/v1/?text=Москва,+Измайловский+бульвар,+67,+корпус+1&lang=ru_RU&scroll=false&z=16" width="100%" height="100%" frameborder="0" style="border:0;" allowfullscreen="true"></iframe>
                        </div>
                    </div>
                    <div class="contact-card">
                        <div class="contact-icon" style="font-size: 2rem; font-weight: 300;">PH</div>
                        <h3>Телефон</h3>
                        <p><a href="tel:+79565209156">+7-956-520-91-56</a></p>
                    </div>
                    <div class="contact-card">
                        <div class="contact-icon" style="font-size: 2rem; font-weight: 300;">EM</div>
                        <h3>Email</h3>
                        <p><a href="mailto:rogdat@mail.ru">rogdat@mail.ru</a></p>
                    </div>
                    <div class="contact-card">
                        <div class="contact-icon" style="font-size: 2rem; font-weight: 300;">TM</div>
                        <h3>График работы</h3>
                        <p>Пн–Вс: 10:00 – 22:00</p>
                        <p style="font-size: 0.85rem; margin-top: 0.3rem; opacity: 0.8;">Доставка: круглосуточно</p>
                    </div>
                </div>
                <div class="contact-info">
                    <div class="info-box">
                        <h4>Соцсети</h4>
                        <div class="social-links">
                            <a href="#">VK</a>
                            <a href="#">Telegram</a>
                            <a href="#">WhatsApp</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Three.js библиотеки (для 3D функций) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <script src="script.js"></script>
</body>
</html>
